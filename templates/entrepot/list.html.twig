{% extends 'back.base.html.twig' %}




{% block body %}
<div class="row">
<div class="col-lg-12 grid-margin stretch-card">
              <div class="card">
                <div class="card-body">
                  <h4 class="card-title">Entrepot</h4>
                  <p class="card-description">
                    list of entrepots
                  </p>
                   <!-- Added a select form to choose sort order -->
        <div class="mb-3">
          <label for="sortOrder" class="form-label">Sort by Capacitee</label>
          <select id="sortOrder" class="form-select">
            <option value="asc">Ascending</option>
            <option value="desc">Descending</option>
          </select>
        </div>

                  <div class="table-responsive pt-3">
                    <table class="table table-bordered " id="entrepotTable">
                      <thead>
                        <tr>
                                           <th>Entrepotid</th>
                <th>Nome</th>
                <th>Adressee</th>
                <th>Capacitee</th>
                <th>Statute</th>
                <th>actions</th>
                                        </tr>
                      </thead>
                      <tbody id="myTable">
                                     {% for entrepot in entrepots %}
                                       <tr>
                <td>{{ entrepot.entrepotid }}</td>
                <td>{{ entrepot.nome }}</td>
                <td>{{ entrepot.adressee }}</td>
                <td>{{ entrepot.capacitee }}</td>
                <td>{{ entrepot.statute }}</td>
                <td>
                    <a href="{{ path('app_entrepot_show', {'entrepotid': entrepot.entrepotid}) }}">show</a>
                    <a href="{{ path('app_entrepot_edit', {'entrepotid': entrepot.entrepotid}) }}">edit</a>
                </td>
            </tr>
                                {% else %}
            <tr>
                <td colspan="6">no records found</td>
            </tr>
        {% endfor %}         
                      </tbody>
                    </table>

                    <div class="container py-5">
  <div class="d-flex justify-content-center">
{{ knp_pagination_render(entrepots) }}

</div>
</div>
<a class="btn btn-primary" href="{{ path('app_entrepot_new') }}">Create new</a>
<a class="btn btn-primary" href="{{ path('app_entrepot_pdf') }}">Export to pdf</a>
                  </div>
                </div>
              </div>
            </div>
            </div>
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script> <!-- Include jQuery -->
<script>
  $('#sortOrder').change(function() { 
    const sortOrder = $(this).val(); // Get selected sort order
    const rows = $('#entrepotTable tbody tr').get();

    rows.sort(function(a, b) {
      const aCap = parseFloat($(a).children('td').eq(3).text()); // Getting Capacitee value
      const bCap = parseFloat($(b).children('td').eq(3).text());
      
      if (sortOrder === 'asc') {
        return aCap - bCap;
      } else {
        return bCap - aCap;
      }
    });

    // Append sorted rows back to the table
    $.each(rows, function(index, row) {
      $('#entrepotTable tbody').append(row);
    });
  });
</script>
{% endblock %}